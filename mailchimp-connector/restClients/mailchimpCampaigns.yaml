baseUrl: !env https://us14.api.mailchimp.com/3.0

cacheConfiguration:
  expireIn: 60

securitySchemes:
  mailchimpApiAuthorization:
    $type: basic
    username: !env ${MAILCHIMP_USERNAME}
    password: !env ${MAILCHIMP_API_KEY}


restCalls:
  campaigns:
    path: '/campaigns'
    method: get
    entityClass: com.fasterxml.jackson.databind.JsonNode
    securityScheme: mailchimpApiAuthorization

  campaign:
    path: '/campaigns/{id}'
    method: get
    entityClass: com.fasterxml.jackson.databind.JsonNode
    securityScheme: mailchimpApiAuthorization

  addCampaign:
    path: '/campaigns'
    method: post
    entityClass: com.fasterxml.jackson.databind.JsonNode
    body: '{ 
      "type": "{type}"",
      "recipients" : {
        "list_id": "{list_id}"
      },
      "settings": {
        "subject_line": "{subject_line}",
        "preview_text": "{preview_text}",
        "title": {title}",
        "from_name": "{from_name}",
        "to_name": "{to_name}"
      }'
    securityScheme: mailchimpApiAuthorization

  scheduleCampaign:
    path: '/campaigns/{id}/actions/schedule'
    method: post
    body: '{"schedule_time": "{schedule_time}"}'
    securityScheme: mailchimpApiAuthorization

  lists:
    path: '/lists'
    method: get
    entityClass: com.fasterxml.jackson.databind.JsonNode
    securityScheme: mailchimpApiAuthorization